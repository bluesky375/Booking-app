{"version":3,"sources":["../../src/pages/my-service-detail/my-service-detail.module.ts","../../src/pages/my-service-detail/my-service-detail.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAyC;AACO;AACU;AACT;AAWjD;IAAA;IAAwC,CAAC;IAA5B,yBAAyB;QATrC,+DAAQ,CAAC;YACR,YAAY,EAAE;gBACZ,+EAAmB;aACpB;YACD,OAAO,EAAE;gBACP,sEAAe,CAAC,QAAQ,CAAC,+EAAmB,CAAC;gBAC7C,oEAAY;aACb;SACF,CAAC;OACW,yBAAyB,CAAG;IAAD,gCAAC;CAAA;AAAH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACdc;AAEF;AACU;AAChB;AACX;AAOjC;IAAyC,uCAAQ;IAE/C,6BACE,QAAkB,EACX,EAAoB,EACpB,IAAU;QAHnB,YAKE,kBAAM,QAAQ,CAAC,SAGhB;QANQ,QAAE,GAAF,EAAE,CAAkB;QACpB,UAAI,GAAJ,IAAI,CAAM;QAkCnB,wBAAkB,GAAG,UAAC,OAIrB;YACC,OAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;gBACjC,IAAI,KAAI,CAAC,IAAI,CAAC,GAAG,KAAK,OAAO,CAAC,QAAQ,EAAE;oBACtC,KAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;oBAC1B,KAAI,CAAC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,OAAO,CAAC;oBACpC,KAAI,CAAC,IAAI,CAAC,MAAM,GAAG,OAAO,CAAC,MAAM,CAAC;iBACnC;gBACD,OAAO,EAAE,CAAC;YACZ,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QA5CA,KAAI,CAAC,IAAI,GAAG,KAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;QACrC,KAAI,CAAC,sBAAsB,CAAC,4BAA4B,CAAC,CAAC;;IAC5D,CAAC;IAED,4CAAc,GAAd;QACE,IAAI,EAAE,GAAG,oCAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;aAC5B,MAAM,CAAC,MAAM,CAAC;aACd,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QACjB,IAAI,EAAE,GAAG,oCAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC;aAClC,MAAM,CAAC,MAAM,CAAC;aACd,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;QAEjB,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC;QAC3B,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,EAAE,CAAC;QACvB,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,IAAI,CAAC,SAAS;YACjB,EAAE,GAAG,IAAI,GAAG,oCAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;QAC5D,IAAI,CAAC,IAAI,CAAC,UAAU;YAClB,EAAE,GAAG,IAAI,GAAG,oCAAM,CAAC,IAAI,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;QAElE,IAAI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,EAAE;YAC1C,KAAc,UAA2B,EAA3B,SAAI,CAAC,IAAI,CAAC,SAAS,CAAC,OAAO,EAA3B,cAA2B,EAA3B,IAA2B;gBAApC,IAAI,CAAC;gBACR,IAAI,IAAI,CAAC,IAAI,CAAC,MAAM,KAAK,CAAC,CAAC,MAAM,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,KAAK,CAAC,CAAC,QAAQ,EAAE;oBACjE,IAAI,CAAC,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;oBAC1B,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC,OAAO,CAAC;oBAC9B,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC;iBAC7B;aACF;SACF;IACH,CAAC;IAiBD,uCAAS,GAAT,UACE,IAAgE,EAChE,KAAU;QAFZ,iBAwCC;QApCC,IAAI,CAAC,WAAW,CACd,6DAA6D,CAC9D;aACE,IAAI,CAAC;YACJ,KAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAChC,IAAI;gBACF,KAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,SAAS,CAChD,cAAI;oBACF,IAAI,CAAC,gBAAgB,GAAG,IAAI,CAAC;oBAC7B,IAAI,IAAI,CAAC,sBAAsB,EAAE;wBAC/B,KAAI,CAAC,MAAM,EAAE,CAAC;qBACf;oBACD,KAAI,CAAC,SAAS,CACZ,yDAAyD,CAC1D,CAAC;oBACF,KAAI,CAAC,eAAe,EAAE,CAAC;gBACzB,CAAC,EACD,eAAK;oBACH,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;oBACnB,KAAI,CAAC,aAAa,EAAE,CAAC;oBACrB,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;gBAChC,CAAC,CACF,CAAC;aACH;YAAC,OAAO,CAAC,EAAE;gBACV,KAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,IAAI,KAAK,SAAQ,CAAC;gBAClB,IAAI,CAAC,CAAC,KAAK,EAAE;oBACX,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;iBACrC;qBAAM;oBACL,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC;iBACnB;gBACD,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;gBACtB,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;aAChB;QACH,CAAC,CAAC;aACD,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAC;IACpC,CAAC;IAED,iCAAG,GAAH,UAAI,IAAsD,EAAE,KAAU;QAAtE,iBA8BC;QA7BC,IAAI,CAAC,WAAW,CAAC,0CAA0C,CAAC;aACzD,IAAI,CAAC;YACJ,KAAI,CAAC,eAAe,CAAC,SAAS,CAAC,CAAC;YAEhC,KAAI,CAAC,EAAE,CAAC,WAAW,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC,SAAS,CAC3C,cAAI;gBACF,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;gBACxB,IAAI,IAAI,CAAC,iBAAiB,EAAE;oBAC1B,KAAI,CAAC,MAAM,EAAE,CAAC;iBACf;gBACD,KAAI,CAAC,SAAS,CACZ,qDAAqD,CACtD,CAAC;gBACF,KAAI,CAAC,eAAe,EAAE,CAAC;YACzB,CAAC,EACD,WAAC;gBACC,KAAI,CAAC,eAAe,EAAE,CAAC;gBACvB,IAAI,KAAa,CAAC;gBAClB,IAAI,CAAC,CAAC,KAAK,EAAE;oBACX,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC;iBACrC;qBAAM;oBACL,KAAK,GAAG,CAAC,CAAC,OAAO,CAAC;iBACnB;gBACD,KAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;gBACtB,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;YACjB,CAAC,CACF,CAAC;QACJ,CAAC,CAAC;aACD,KAAK,CAAC,aAAG,IAAI,cAAO,CAAC,GAAG,CAAC,GAAG,CAAC,EAAhB,CAAgB,CAAC,CAAC;IACpC,CAAC;IA9HU,mBAAmB;QAJ/B,gEAAS,CAAC;YACT,QAAQ,EAAE,wBAAwB;WACG;SACtC,CAAC;0FAIoB;YACP,+DAAgB;YACd,IAAI;OALR,mBAAmB,CA+H/B;wEAAD,GAAC;AAAA;SA/HY,mBAAmB,iB","file":"11.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { MyServiceDetailPage } from './my-service-detail';\nimport {SharedModule} from \"../../shared.module\";\n\n@NgModule({\n  declarations: [\n    MyServiceDetailPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(MyServiceDetailPage),\n    SharedModule\n  ],\n})\nexport class MyServiceDetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my-service-detail/my-service-detail.module.ts","import { Component, Injector } from \"@angular/core\";\nimport { IonicPage } from \"ionic-angular\";\nimport { BasePage } from \"../base-page/base-page\";\nimport { ServicesProvider } from \"../../providers/services\";\nimport { User } from \"../../providers/user\";\nimport * as moment from \"moment\";\n\n@IonicPage()\n@Component({\n  selector: \"page-my-service-detail\",\n  templateUrl: \"my-service-detail.html\"\n})\nexport class MyServiceDetailPage extends BasePage {\n  data: any;\n  constructor(\n    injector: Injector,\n    public sp: ServicesProvider,\n    public user: User\n  ) {\n    super(injector);\n    this.data = this.NavParams(\"booked\");\n    this.firebase_CurrentScreen(\"User Service Detail Screen\");\n  }\n\n  ionViewDidLoad() {\n    let fd = moment(this.data.date)\n      .format(\"llll\")\n      .split(\",\")[0];\n    let tp = moment(this.data.timeBooked)\n      .format(\"llll\")\n      .split(\",\")[0];\n\n    this.data.reviewed = false;\n    this.data.comment = \"\";\n    this.data.rating = \"\";\n    this.data.full_date =\n      fd + \", \" + moment(this.data.date).format(\"MMM Do, YYYY\");\n    this.data.timeposted =\n      tp + \", \" + moment(this.data.timeBooked).format(\"MMM Do, YYYY\");\n\n    if (this.data.provider_.reviews.length > 0) {\n      for (let r of this.data.provider_.reviews) {\n        if (this.data.userId === r.userId && this.data._id === r.bookedId) {\n          this.data.reviewed = true;\n          this.data.comment = r.comment;\n          this.data.rating = r.rating;\n        }\n      }\n    }\n  }\n\n  myCallbackFunction = (_params: {\n    bookedId: any;\n    comment: any;\n    rating: any;\n  }) => {\n    return new Promise((resolve, reject) => {\n      if (this.data._id === _params.bookedId) {\n        this.data.reviewed = true;\n        this.data.comment = _params.comment;\n        this.data.rating = _params.rating;\n      }\n      resolve();\n    });\n  };\n\n  completed(\n    item: { client_completed: boolean; professional_completed: any },\n    index: any\n  ) {\n    this.showConfirm(\n      \"Are you sure you want to mark this appointment as completed\"\n    )\n      .then(() => {\n        this.showLoadingView(\"p-home2\");\n        try {\n          this.sp.completedService(item, \"client\").subscribe(\n            data => {\n              item.client_completed = true;\n              if (item.professional_completed) {\n                this.goBack();\n              }\n              this.showToast(\n                \"You've successfully marked this appointment as complete\"\n              );\n              this.showContentView();\n            },\n            error => {\n              console.log(error);\n              this.showErrorView();\n              this.showToast(error.message);\n            }\n          );\n        } catch (e) {\n          this.showContentView();\n          let error: string;\n          if (e._body) {\n            error = JSON.parse(e._body).message;\n          } else {\n            error = e.message;\n          }\n          this.showToast(error);\n          console.log(e);\n        }\n      })\n      .catch(err => console.log(err));\n  }\n\n  pay(item: { client_paid: boolean; professional_paid: any }, index: any) {\n    this.showConfirm(\"Are you sure payment has been completed'\")\n      .then(() => {\n        this.showLoadingView(\"invoice\");\n\n        this.sp.paidService(item, \"client\").subscribe(\n          data => {\n            item.client_paid = true;\n            if (item.professional_paid) {\n              this.goBack();\n            }\n            this.showToast(\n              \"You've successfully marked this appointment as paid\"\n            );\n            this.showContentView();\n          },\n          e => {\n            this.showContentView();\n            let error: string;\n            if (e._body) {\n              error = JSON.parse(e._body).message;\n            } else {\n              error = e.message;\n            }\n            this.showToast(error);\n            console.log(e);\n          }\n        );\n      })\n      .catch(err => console.log(err));\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/my-service-detail/my-service-detail.ts"],"sourceRoot":""}