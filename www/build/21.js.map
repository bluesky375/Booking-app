{"version":3,"sources":["../../src/pages/edit-contact/edit-contact.module.ts","../../src/pages/edit-contact/edit-contact.ts"],"names":[],"mappings":"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","file":"21.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { EditContactPage } from './edit-contact';\n\n@NgModule({\n  declarations: [\n    EditContactPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(EditContactPage),\n  ],\n})\nexport class EditContactPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-contact/edit-contact.module.ts","import {Component, Injector,ViewChild } from '@angular/core';\nimport { IonicPage,Slides } from 'ionic-angular';\nimport {BasePage} from \"../base-page/base-page\";\nimport {User} from \"../../providers/user\";\nimport {Observable} from 'rxjs/Rx';\n\n\n@IonicPage()\n@Component({\n  selector: 'page-edit-contact',\n  templateUrl: 'edit-contact.html',\n})\nexport class EditContactPage extends BasePage{\n\n  @ViewChild(Slides) slides: Slides;\n  number: string = '';\n  number2: string = '';\n  email: string = '';\n  Vcode: string = '';\n  passed30: boolean = false;\n  timer: number = 300000;\n  init:boolean = true;\n  id:string = '';\n  mySubscription:any;\n  callback:any;\n\n  constructor(injector: Injector,\n     public user:User) {\n    super(injector);\n    this.email = this.user.getUserInfo().email;\n    this.number = this.user.getUserInfo().phone;\n    this.callback = this.NavParams('callback');\n\n    this.firebase_CurrentScreen('Edit User Contact Screen');\n  }\n\n  ionViewDidLoad() {\n    this.slides.lockSwipes(true);\n  }\n\n  Submit(){\n    if(this.number === '' || !this.number || this.number.length < 9 || this.number.length > 14){\n      this.showToast('Please enter a valid phone number');\n      return;\n    }\n    if(this.email === '' || !this.email){\n      this.showToast('Please enter a valid email address');\n      return;\n    }\n\n    let d = {\n      init: this.init,\n      id: this.user.getUserInfo()._id,\n      old_number: this.user.getUserInfo().phone,\n      old_email: this.user.getUserInfo().email,\n      token: this.user.getUserInfo().token,\n      email: this.email,\n      number: this.number,\n      number2: this.number2,\n    };\n\n    if(d.number === d.old_number && d.email === d.old_email){\n      let res = {data:d};\n      this.callback(res).then(()=>{\n        this.goBack();\n      });\n      return;\n    }\n\n    this.showLoadingView('ec');\n    window.localStorage.setItem('number',this.number);\n\n    this.user.EditContacts(d).subscribe(data =>{\n      if(data.success){\n        this.showContentView();\n        if(d.old_number === d.number){\n          this.showToast('You\\'ve successfully updated your contacts');\n          let res = {data:data};\n          this.callback(res).then(()=>{\n            this.goBack();\n          });\n        }else{\n          this.id = data.id;\n          this.timer = 30;\n          this.mySubscription = Observable.interval(1000).map(() => {}).subscribe(() => {\n            this.timer = this.timer - 1;\n            console.log(this.timer);\n            if (this.timer === 0) {\n              if(this.passed30 === false) {\n                this.passed30 = true;\n                this.timer = 59;\n              }else{\n                this.SwitchNumber();\n              }\n            }\n          });\n          this.passed30 = false;\n          this.slides.lockSwipes(false);\n          this.slides.slideNext();\n          this.slides.lockSwipes(true);\n        }\n      }else{\n        this.showToast(data.message);\n      }\n    },e => {\n      this.showContentView();\n      let error: string;\n      if(e._body){\n        error = JSON.parse(e._body).message\n      }else {\n        error = e.message\n      }\n      this.showToast(error);\n      console.log(e);\n    });\n  }\n\n  SubmitCode(){\n    let data = {\n      phone: this.number,\n      code: this.Vcode,\n      id: this.id,\n      token: this.user.getUserInfo().token,\n      type: 'local'\n    };\n\n    this.showLoadingView('ec2');\n\n    this.user.ChangeNumber(data).subscribe(data => {\n      if(data.success){\n        this.showContentView();\n        this.mySubscription.unsubscribe();\n        window.localStorage.setItem('token',  JSON.stringify(data.access_token));\n        window.localStorage.setItem('user',  JSON.stringify(data.user));\n        window.localStorage.setItem('type', JSON.stringify(data.type));\n        this.showToast('You\\'ve successfully updated your contacts');\n        let res = {data:data};\n        this.callback(res).then(()=>{\n          this.goBack();\n        });\n      }else{\n        this.showErrorView();\n        this.showToast(data.msg);\n      }\n    },e => {\n      this.showContentView();\n      let error: string;\n      if(e._body){\n        error = JSON.parse(e._body).message\n      }else {\n        error = e.message\n      }\n      this.showToast(error);\n      console.log(e);\n    })\n  }\n\n  SwitchNumber(){\n    this.mySubscription.unsubscribe();\n    this.init = false;\n    this.number2 = window.localStorage.getItem('number');\n    this.slides.lockSwipes(false);\n    this.slides.slideTo(0, 500);\n    this.slides.lockSwipeToNext(true);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/edit-contact/edit-contact.ts"],"sourceRoot":""}