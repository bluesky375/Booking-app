{"version":3,"sources":["../../src/pages/shop/shop.module.ts","../../src/pages/shop/shop.ts"],"names":[],"mappings":"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","file":"5.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ShopPage } from './shop';\nimport {SharedModule} from \"../../shared.module\";\n\n@NgModule({\n  declarations: [\n    ShopPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ShopPage),\n    SharedModule\n  ],\n})\nexport class ShopPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/shop/shop.module.ts","import {Component, Injector, Renderer} from '@angular/core';\nimport { IonicPage} from 'ionic-angular';\nimport {BasePage} from \"../base-page/base-page\";\nimport {ImgLoader} from \"ionic-image-loader\";\nimport { LaunchNavigator, LaunchNavigatorOptions } from '@ionic-native/launch-navigator';\nimport {ServicesProvider} from \"../../providers/services\";\nimport {CallNumber} from \"@ionic-native/call-number\";\nimport {SocialSharing} from \"@ionic-native/social-sharing\";\n\n\n@IonicPage()\n@Component({\n  selector: 'page-shop',\n  templateUrl: 'shop.html',\n})\nexport class ShopPage extends BasePage{\n\n  service:any = null;\n  services:any = [];\n  reviews:any = [];\n  category:any;\n  categories:any;\n  provider:any;\n\n  constructor(injector: Injector,\n             public sp: ServicesProvider,\n              private callNumber: CallNumber,\n              private launchNavigator: LaunchNavigator,\n              private socialSharing: SocialSharing,\n             public renderer: Renderer) {\n    super(injector);\n    this.category = this.NavParams('category');\n    this.provider = this.NavParams('provider');\n    this.firebase_CurrentScreen('Service Provider Profile Screen');\n  }\n\n  onImageLoad(imgLoader: ImgLoader) {\n    this.renderer.setElementClass(imgLoader.element, 'fade-in', true);\n  }\n\n  ionViewDidLoad() {\n    this.showLoadingView('shop=view');\n    this.loadData()\n  }\n\n\n  async loadData(){\n\n    this.services = [];\n    this.categories = [];\n    let categories = [];\n    let j = 0;\n    if(this.provider.services && this.provider.services.length > 0){\n      for(let s of this.provider.services){\n       await this.sp.getServiceById(s).subscribe( (service: any) => {\n         categories.push(JSON.parse(service._body));\n         j++;\n         if(j === this.provider.services.length){\n           for(let s of categories){\n             s.selected = false;\n             this.categories.push(s);\n           }\n         }\n       })\n      }\n    }\n\n    let services = [];\n    if(this.provider.categories && this.provider.categories.length > 0){\n      let i = 0;\n      for(let category of this.provider.categories){\n        await this.sp.getCategoryById(category).subscribe( (service: any) => {\n          services.push(JSON.parse(service._body));\n          i++;\n          if(i === this.provider.categories.length){\n            for(let s of services){\n              s.selected = false;\n              this.services.push(s);\n            }\n            this.showContentView();\n            this.onRefreshComplete();\n          }\n\n\n        }, (e) => {\n          console.error(e);\n          this.showErrorView();\n          this.onRefreshComplete();\n        });\n      }\n    }else{\n      this.showContentView();\n    }\n\n  }\n\n  async loadProvider(){\n    await this.sp.getPersonnelById(this.provider._id).subscribe( (provider: any) => {\n\n      this.provider = provider;\n      this.showContentView();\n      this.onRefreshComplete();\n\n\n    }, (e) => {\n      console.error(e);\n      this.showErrorView();\n      this.onRefreshComplete();\n    });\n  }\n\n  onReload(refresher: any) {\n    this.refresher = refresher;\n    this.loadData();\n    this.loadProvider();\n  }\n\n  async onShare () {\n    try {\n      await this.socialSharing.share('I booked '+this.provider.name +' - ' +this.provider.title+ ' on spekapp. download at http://www.spekapp.com', null, null)\n    } catch (err) {\n      console.warn(err)\n    }\n  }\n\n  async onCall () {\n\n    if (!this.provider.number) return;\n\n    try {\n      await this.callNumber.callNumber(this.provider.number, true)\n    } catch (err) {\n      console.warn(err)\n    }\n  }\n\n  async goToMap() {\n\n    try {\n\n      const googleMaps = this.launchNavigator.APP.GOOGLE_MAPS;\n      const appleMaps = this.launchNavigator.APP.APPLE_MAPS;\n\n      const isGoogleMapsAvailable = await this.launchNavigator.isAppAvailable(googleMaps);\n      const isAppleMapsAvailable = await this.launchNavigator.isAppAvailable(appleMaps);\n\n      let app = null;\n\n      if (isGoogleMapsAvailable) {\n        app = this.launchNavigator.APP.GOOGLE_MAPS;\n      } else if (isAppleMapsAvailable) {\n        app = this.launchNavigator.APP.APPLE_MAPS;\n      } else {\n        app = this.launchNavigator.APP.USER_SELECT;\n      }\n\n      const options: LaunchNavigatorOptions = {\n        app: app\n      };\n\n      const destination = [\n        parseFloat(this.provider.latitude),\n        parseFloat(this.provider.longitude)\n      ];\n\n      await this.launchNavigator.navigate(destination, options);\n\n    } catch (err) {\n      console.warn(err);\n    }\n\n  }\n\n  Book(){\n\n    if(!this.service){\n      this.showToast('Select a service');\n      return;\n    }\n\n    this.openPage('CalendarPage', { service: this.service,category: this.category, provider:this.provider })\n\n  }\n\n  SelectService(service: { _id: any; }){\n    for(let s of this.services) s.selected = service._id === s._id;\n    this.service = service;\n    for(let c of this.categories) {\n      if(c._id === this.service.serviceId ){\n        this.category = c;\n      }\n    }\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/shop/shop.ts"],"sourceRoot":""}